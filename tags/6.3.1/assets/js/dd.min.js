jQuery(document).ready((function(e){var t=document.getElementsByName("shipping_method[0]");for(i=0;i<t.length;i++)if(t[i].checked)var o=t[i].value;null===o&&void 0!==t[0]?o=t[0].value:null===o&&(o="");var r=[];for(const[e,t]of Object.entries(bkf_dd_options.datesListFull))t.pass?(void 0!==t.mr&&t.mr.forEach((function(t,i,d){t==o&&(r[e]=[!1,"unavailable",bkf_dd_options.mrText])})),void 0!==t.msl&&t.msl.forEach((function(t,i,d){timeNow=new Date,timeThen=new Date(t[2]),t==o&&timeNow>=timeThen&&(r[e]=[!1,"unavailable",bkf_dd_options.sdcMethod])}))):r[e]=t.outcome;jQuery("#delivery_date").attr("readOnly","true"),jQuery(".delivery_date").datepicker({minDate:0,maxDate:bkf_dd_options.maxDate,dateFormat:"DD, d MM yy",hideIfNoPrevNext:!0,firstDay:1,constrainInput:!0,beforeShowDay:function(e){var t=e.getDate(),o=e.getMonth()+1,i=e.getFullYear(),d=t+"."+o+"."+i;void 0!==r[d]?currentResult=r[d]:currentResult=[!0];return currentResult},onUpdateDatepicker:function(e){dates=jQuery(".ui-datepicker-calendar td"),dates.each((function(e){jQuery(this).css("pointer-events","auto")}))},showButtonPanel:!0,showOtherMonths:!0,selectOtherMonths:!0})})),jQuery(document.body).on("change","input.shipping_method",(function(e){var t=document.getElementsByName("shipping_method[0]");for(i=0;i<t.length;i++)if(t[i].checked)var o=t[i].value;null===o&&void 0!==t[0]?o=t[0].value:null===o&&(o="");var r=[];for(const[e,t]of Object.entries(bkf_dd_options.datesListFull))t.pass?(void 0!==t.mr&&t.mr.forEach((function(t,i,d){t==o&&(r[e]=[!1,"unavailable",bkf_dd_options.mrText])})),void 0!==t.msl&&t.msl.forEach((function(t,i,d){timeNow=new Date,timeThen=new Date(t[2]),t==o&&timeNow>=timeThen&&(r[e]=[!1,"unavailable",bkf_dd_options.sdcMethod])}))):r[e]=t.outcome;jQuery(".delivery_date").datepicker("option",{beforeShowDay:function(e){var t=e.getDate(),o=e.getMonth()+1,i=e.getFullYear(),d=t+"."+o+"."+i;void 0!==r[d]?currentResult=r[d]:currentResult=[!0];return currentResult}})})),jQuery(document).on("change","input.shipping_method, input.delivery_date",(function(e){const t=document.querySelector("#delivery_timeslot");if(jQuery(t).empty(e),0===bkf_dd_options_ts.length){const e=document.querySelector("#delivery_timeslot_field");jQuery(e).addClass("bkf-hidden"),document.querySelector("#delivery_timeslot").removeAttribute("required")}else bkf_dd_options_ts.forEach((function(e){const t=document.querySelector("#delivery_timeslot_field");var o=document.getElementsByName("shipping_method[0]");for(i=0;i<o.length;i++)if(o[i].checked)var r=o[i].value;null===r&&void 0!==o[0]?r=o[0].value:null===r&&(r="");jQuery.ajax(bkf_dd_options.ajax_url,{async:!1,data:{action:"bkf_retrieve_session_ts"},method:"POST",success:function(e){currentTs=JSON.parse(e)}});var d=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n=document.querySelector("#delivery_date").value,l=Date.parse(n),u=new Date(l),s=d[u.getDay()];if(e.day==s&&e.method==r)if(currentTs==e.slot){const t=document.querySelector("#delivery_timeslot");let o=new Option(e.text,e.slot,!0,!0);t.add(o,void 0)}else{const t=document.querySelector("#delivery_timeslot");let o=new Option(e.text,e.slot,!1);t.add(o,void 0)}if(document.querySelector("#delivery_timeslot").options.length){const e=document.querySelector("#delivery_timeslot_field");jQuery(e).removeClass("bkf-hidden"),document.querySelector("#delivery_timeslot").setAttribute("required","")}else jQuery(t).addClass("bkf-hidden"),document.querySelector("#delivery_timeslot").removeAttribute("required")}))})),jQuery(document).ready((function(e){const t=document.querySelector("#delivery_timeslot");if(jQuery(t).empty(e),0===bkf_dd_options_ts.length){const e=document.querySelector("#delivery_timeslot_field");jQuery(e).addClass("bkf-hidden"),document.querySelector("#delivery_timeslot").removeAttribute("required")}else bkf_dd_options_ts.forEach((function(e){const t=document.querySelector("#delivery_timeslot_field");var o=document.getElementsByName("shipping_method[0]");for(i=0;i<o.length;i++)if(o[i].checked)var r=o[i].value;null===r&&void 0!==o[0]?r=o[0].value:null===r&&(r="");jQuery.ajax(bkf_dd_options.ajax_url,{async:!1,data:{action:"bkf_retrieve_session_ts"},method:"POST",success:function(e){currentTs=JSON.parse(e)}});var d=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n=document.querySelector("#delivery_date").value,l=Date.parse(n),u=new Date(l),s=d[u.getDay()];if(e.day==s&&e.method==r)if(currentTs==e.slot){const t=document.querySelector("#delivery_timeslot");let o=new Option(e.text,e.slot,!0,!0);t.add(o,void 0)}else{const t=document.querySelector("#delivery_timeslot");let o=new Option(e.text,e.slot,!1);t.add(o,void 0)}if(document.querySelector("#delivery_timeslot").options.length){const e=document.querySelector("#delivery_timeslot_field");jQuery(e).removeClass("bkf-hidden"),document.querySelector("#delivery_timeslot").setAttribute("required","")}else jQuery(t).addClass("bkf-hidden"),document.querySelector("#delivery_timeslot").removeAttribute("required")}))}));