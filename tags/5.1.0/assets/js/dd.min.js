jQuery(document).ready((function(e){var t=document.getElementsByName("shipping_method[0]");for(i=0;i<t.length;i++)if(t[i].checked)var r=t[i].value;null===r&&void 0!==t[0]?r=t[0].value:null===r&&(r=""),jQuery.ajax(thisAjaxUrl,{async:!1,data:{action:"bkf_dd",method:r},method:"POST",success:function(e){datesList=JSON.parse(e)}}),jQuery("#delivery_date").attr("readOnly","true"),jQuery(".delivery_date").datepicker({minDate:0,maxDate:maxDate,dateFormat:"DD, d MM yy",hideIfNoPrevNext:!0,firstDay:1,constrainInput:!0,beforeShowDay:function(e){var t=e.getDate(),r=e.getMonth()+1,o=e.getFullYear(),i=t+"."+r+"."+o;void 0!==datesList[i]?currentResult=datesList[i]:currentResult=[!0];return currentResult},onUpdateDatepicker:function(e){dates=jQuery(".ui-datepicker-calendar td"),dates.each((function(e){jQuery(this).css("pointer-events","auto")}))},showButtonPanel:!0,showOtherMonths:!0,selectOtherMonths:!0})})),jQuery(document.body).on("change","input.shipping_method",(function(e){var t=document.getElementsByName("shipping_method[0]");for(i=0;i<t.length;i++)if(t[i].checked)var r=t[i].value;null===r&&void 0!==t[0]?r=t[0].value:null===r&&(r=""),jQuery.ajax(thisAjaxUrl,{async:!1,data:{action:"bkf_dd",method:r},method:"POST",success:function(e){datesList=JSON.parse(e)}}),jQuery(".delivery_date").datepicker("option",{beforeShowDay:function(e){var t=e.getDate(),r=e.getMonth()+1,o=e.getFullYear(),i=t+"."+r+"."+o;void 0!==datesList[i]?currentResult=datesList[i]:currentResult=[!0];return currentResult}})})),jQuery(document).on("change","input.shipping_method, input.delivery_date",(function(e){const t=document.querySelector("#delivery_timeslot");if(jQuery(t).empty(e),0===all_options.length){const e=document.querySelector("#delivery_timeslot_field");jQuery(e).addClass("bkf-hidden"),document.querySelector("#delivery_timeslot").removeAttribute("required")}else all_options.forEach((function(e){const t=document.querySelector("#delivery_timeslot_field");var r=document.getElementsByName("shipping_method[0]");for(i=0;i<r.length;i++)if(r[i].checked)var o=r[i].value;null===o&&void 0!==r[0]?o=r[0].value:null===o&&(o="");jQuery.ajax(thisAjaxUrl,{async:!1,data:{action:"bkf_retrieve_session_ts"},method:"POST",success:function(e){currentTs=JSON.parse(e)}});var d=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n=document.querySelector("#delivery_date").value,l=Date.parse(n),u=new Date(l),s=d[u.getDay()];if(e.day==s&&e.method==o)if(currentTs==e.slot){const t=document.querySelector("#delivery_timeslot");let r=new Option(e.text,e.slot,!0,!0);t.add(r,void 0)}else{const t=document.querySelector("#delivery_timeslot");let r=new Option(e.text,e.slot,!1);t.add(r,void 0)}if(document.querySelector("#delivery_timeslot").options.length){const e=document.querySelector("#delivery_timeslot_field");jQuery(e).removeClass("bkf-hidden"),document.querySelector("#delivery_timeslot").setAttribute("required","")}else jQuery(t).addClass("bkf-hidden"),document.querySelector("#delivery_timeslot").removeAttribute("required")}))})),jQuery(document).ready((function(e){const t=document.querySelector("#delivery_timeslot");if(jQuery(t).empty(e),0===all_options.length){const e=document.querySelector("#delivery_timeslot_field");jQuery(e).addClass("bkf-hidden"),document.querySelector("#delivery_timeslot").removeAttribute("required")}else all_options.forEach((function(e){const t=document.querySelector("#delivery_timeslot_field");var r=document.getElementsByName("shipping_method[0]");for(i=0;i<r.length;i++)if(r[i].checked)var o=r[i].value;null===o&&void 0!==r[0]?o=r[0].value:null===o&&(o="");jQuery.ajax(thisAjaxUrl,{async:!1,data:{action:"bkf_retrieve_session_ts"},method:"POST",success:function(e){currentTs=JSON.parse(e)}});var d=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n=document.querySelector("#delivery_date").value,l=Date.parse(n),u=new Date(l),s=d[u.getDay()];if(e.day==s&&e.method==o)if(currentTs==e.slot){const t=document.querySelector("#delivery_timeslot");let r=new Option(e.text,e.slot,!0,!0);t.add(r,void 0)}else{const t=document.querySelector("#delivery_timeslot");let r=new Option(e.text,e.slot,!1);t.add(r,void 0)}if(document.querySelector("#delivery_timeslot").options.length){const e=document.querySelector("#delivery_timeslot_field");jQuery(e).removeClass("bkf-hidden"),document.querySelector("#delivery_timeslot").setAttribute("required","")}else jQuery(t).addClass("bkf-hidden"),document.querySelector("#delivery_timeslot").removeAttribute("required")}))}));